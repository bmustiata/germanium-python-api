return function(){function a(a){for(f=g.shift();f--;)a.push(g.shift())}function b(a,b){if(!b||!a)return!1;for(;b;){if(b==a)return!0;b=b.parentNode}return!1}var c,d,e,f,g,h=[],i=[],j=[];for(g=[],d=0;d<arguments.length;d++)g.push(arguments[d]);if(c=g.shift(),a(h),a(i),a(j),c)for(d=j.length-1;d>=0;d--)j[d].childNodes&&j[d].childNodes.length&&j.splice(d,1);if(h.length)a:for(d=j.length-1;d>=0;d--){for(e=0;e<h.length;e++)if(b(h[e],j[d]))continue a;j.splice(d,1)}if(i.length)a:for(d=j.length-1;d>=0;d--)for(e=0;e<i.length;e++)if(!b(j[d],i[e])){j.splice(d,1);continue a}return j}.apply(this,arguments);